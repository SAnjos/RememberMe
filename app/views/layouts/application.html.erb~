<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <%= javascript_include_tag :all, :recursive => true %>  
  <%= stylesheet_link_tag 'scaffold' %>
  <%= stylesheet_link_tag 'main' %>
  <%= stylesheet_link_tag 'contextMenu/jquery.contextmenu' %>
</head>
<body>

  <div id="page">
    <%= yield %>
  </div>

</body>
</html>

<script>
  function CriaNota(posX,posY){
    var nota = '';
	nota += '<div class="note draggable">';
	nota += '<div class="noteHeader">';
	nota += 'OI! cabecalho';
        nota += '</div>';
        nota += '<div class="noteBody">';
        nota += 'OI! body';
        nota += '</div>';
        nota += '</div>';

        $('#page').append(nota);
        $('.note:last').css("left",posX);
        $('.note:last').css("top",posY);
        setDraggable();
  }


  // ---------------

  function setDraggable(){
    $('.draggable').draggable();
  }

  // ---------------


  $().ready(function(){

  var menu1 = [
    {'Novo lembrete': function(menuItem,menuObject) {
                            var pos = $(menuObject.menu).position();
                            CriaNota(pos.left,pos.top);
                         } },
    $.contextMenu.separator
    ];

    $('#page').contextMenu(menu1,{theme:'vista'});


    $('#btCriador').click(function(menuItem,menuObject){
        CriaNota();
    });
    // ---------------
  
    setDraggable();

     // ---------------

    $('#page').contextMenu([
    {'Criar Nota' : CraNota() }
    
    ]);
  });

</script>
